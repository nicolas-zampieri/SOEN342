<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EU Rail Search — Single Page</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <div class="wrap">
      <h1>EU Rail Search</h1>
      <p class="lead">Upload <code>eu_rail_network.csv</code>, set filters, and find direct or connected itineraries (up
        to 2 stops).</p>
    </div>
  </header>

  <main class="wrap split">
    <section class="card sticky">
      <div class="grid">
        <div>
          <label for="csv">CSV File</label>
          <input id="csv" type="file" accept=".csv" />
          <div class="hint">Expected headers: Route ID, Departure City, Arrival City, Departure Time, Arrival Time,
            Train Type, Days of Operation, First Class ticket rate (in euro), Second Class ticket rate (in euro)</div>
        </div>
      </div>

      <div class="kpi">
        <div class="card">
          <div class="muted">Routes Loaded</div>
          <div id="kpi-routes" class="num">0</div>
        </div>
        <div class="card">
          <div class="muted">Cities</div>
          <div id="kpi-cities" class="num">0</div>
        </div>
        <div class="card">
          <div class="muted">Direct A→B</div>
          <div id="kpi-direct" class="num">0</div>
        </div>
        <div class="card">
          <div class="muted">Results</div>
          <div id="kpi-results" class="num">0</div>
        </div>
      </div>

      <div class="grid cols-3">
        <div>
          <label for="from">From</label>
          <input id="from" placeholder="e.g., Paris" />
        </div>
        <div>
          <label for="to">To</label>
          <input id="to" placeholder="e.g., Berlin" />
        </div>
        <div>
          <label for="traintype">Train Type</label>
          <input id="traintype" placeholder="e.g., TGV, IC" />
        </div>
      </div>

      <div class="grid cols-4">
        <div>
          <label for="days">Days (comma‑sep)</label>
          <input id="days" placeholder="Mon,Wed,Fri" />
        </div>
        <div>
          <label for="depfrom">Dep from</label>
          <input id="depfrom" placeholder="HH:MM" />
        </div>
        <div>
          <label for="depto">Dep to</label>
          <input id="depto" placeholder="HH:MM" />
        </div>
        <div>
          <label for="class">Class</label>
          <select id="class">
            <option value="second" selected>Second</option>
            <option value="first">First</option>
          </select>
        </div>
      </div>

      <div class="grid cols-4">
        <div>
          <label for="price1">Max First‑Class (per leg)</label>
          <input id="price1" type="number" min="0" step="0.01" />
        </div>
        <div>
          <label for="price2">Max Second‑Class (per leg)</label>
          <input id="price2" type="number" min="0" step="0.01" />
        </div>
        <div>
          <label for="maxstops">Max Stops</label>
          <select id="maxstops">
            <option value="0">0 (direct)</option>
            <option value="1">1</option>
            <option value="2" selected>2</option>
          </select>
        </div>
        <div>
          <label for="minxfer">Min Transfer (min)</label>
          <input id="minxfer" type="number" min="0" value="10" />
        </div>
      </div>

      <div class="controls" style="margin-top:8px">
        <button id="btn-search" class="primary">Search</button>
        <button id="btn-reset" class="secondary">Reset</button>
        <select id="sort" class="pill" style="max-width:220px">
          <option value="duration" selected>Sort: Duration</option>
          <option value="price">Sort: Price</option>
        </select>
        <button id="btn-export" class="secondary">Export Results CSV</button>
      </div>
      <div id="msg" class="hint" style="margin-top:8px"></div>
    </section>

    <section class="card">
      <div class="flex" style="justify-content:space-between; align-items:center">
        <h2 style="margin:0;font-size:18px">Results</h2>
        <div class="muted" id="summary"></div>
      </div>
      <div style="overflow:auto; max-height:70vh; margin-top:10px">
        <table class="table" id="results">
          <thead>
            <tr>
              <th>Stops</th>
              <th>Total Duration</th>
              <th>Price (chosen class)</th>
              <th>Train Type</th>
              <th>Days of Operation</th>
              <th>Transfers</th>
              <th>Path</th>
              <th>Legs</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Papa Parse for robust CSV loading (tiny, CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="main.js"></script>
</body>

</html>
